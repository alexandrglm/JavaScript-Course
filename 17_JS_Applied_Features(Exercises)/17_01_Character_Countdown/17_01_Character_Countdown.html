<!DOCTYPE html>
<html lang='en'>
<head>
<meta charset='UTF-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0'>
<title>17_01 Character Countdown</title>
<style>

</style>
</head>
<style>
    .container {
        display: grid;
        max-width: 80vw;
        height: auto;
    }

    .container p {
        background: #bbff00;
        border: 2px solid black;
    }
    
    .container input {

        height: 50vh;
        width: 80vw;
    }
</style>
<body>
    <div class="container">
        <p>Character Container Demo</p>
        <input text="text" class="msgInput">

        <div>
            Characters Left -> <span class="msgCounter">144</span>
        </div>

    </div>
    <script>

        const msgInput = document.querySelector('.msgInput');
        
        const msgCounter = document.querySelector('.msgCounter');
        
        const maxValue = 144;
        

        // ensure character counting
        /*
        *
        * func:    ensure that the message content has (or hasn't) a max lenght characters
        * params:  
        *          content -> The message from input
        *          maxValue -> The max lenght set @ maxValue const
        * 
        * Return:    True or False
        */ 
        const getCurrentContentLength = (content, maxValue) => {
            
            const maxLength = maxValue;
            
            if (content.length > maxLength) {
                
                return false;
            
            } else {
            
                return true;
            
            }
        }


        // event listeners watch for keyUp -> Pressing key, when finished typing
        /*
        * .onkeyup() event listener
        *
        * Func:
        *        msgCounter.innerHTML = maxValue MINUS the predefined maxValue as length
        * 
        * 
        * Scope: this needs its own scope so arrow functions it's not elegible
        */ 
        msgInput.onkeyup = function () {

            console.log(this.value)
            
            msgCounter.innerHTML = maxValue -this.value.length

            /*
             * 
             *  Then, if ensure content length cannot be ensured ,
             *  text input will be disabled.
             */
            
            if ( !getCurrentContentLength( this.value, ( maxValue -1) )) {

                msgInput.disabled = true;
            
            }
        }


    </script>
</body>
</html>